<h1>{{create ? 'New user' : user.username}}</h1>

<div class="danger">
  <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
</div>

<form name="form" role="form" novalidate>
  
  <div class="form-group has-feedback" ng-if="create" data-scmmu-validate>
    <label class="control-label" for="username">Username</label>
    <input id="username" name="username" type="text" class="form-control" placeholder="Enter username" ng-model="user.username" required="true">
    <span class="fa fa-check fa-2x form-control-feedback"></span>
    <span class="fa fa-times fa-2x form-control-feedback"></span>
    <strong class="text-danger help-block">
      Username is required
    </strong>
  </div>
  
  <div class="form-group">
    <label class="control-label" for="givenname">Given name</label>
    <input type="text" class="form-control" id="givenname" placeholder="Enter given name" ng-model="user.givenname">
  </div>
  <div class="form-group has-feedback" scmmu-validate>
    <label class="control-label" for="surname">Surname</label>
    <input id="surname" name="surname" type="text" class="form-control" placeholder="Enter surname" required="true" ng-model="user.surname">
    <span class="fa fa-check fa-2x form-control-feedback"></span>
    <span class="fa fa-times fa-2x form-control-feedback"></span>
    <strong class="text-danger help-block">
      Surname is required
    </strong>
  </div>
  <div class="form-group has-feedback" scmmu-validate>
    <label class="control-label" for="commonname">Common name</label>
    <input id="commonname" name="commonname" type="text" class="form-control" placeholder="Enter common name" required="true" ng-model="user.commonname">
    <span class="fa fa-check fa-2x form-control-feedback"></span>
    <span class="fa fa-times fa-2x form-control-feedback"></span>
    <strong class="text-danger help-block">
      Common name is required
    </strong>
  </div>
  <div class="form-group has-feedback" scmmu-validate>
    <label class="control-label" for="email">Email address</label>
    <input id="email" name="email" type="email" class="form-control" placeholder="Enter email" required="true" ng-model="user.mail">
    <span class="fa fa-check fa-2x form-control-feedback"></span>
    <span class="fa fa-times fa-2x form-control-feedback"></span>
    <strong class="text-danger help-block">
      E-Mail address is invalid
    </strong>
  </div>
  <div class="form-group" scmmu-validate>
    <label for="password">Password</label>
    <input id="password" name="password" type="password" class="form-control" placeholder="Password" required="true" ng-model="user.password">
  </div>
  <div class="form-group" scmmu-validate>
    <label for="confirmPassword">Confirm password</label>
    <input id="confirmPassword" name="confirmPassword" type="password" class="form-control" placeholder="Password" ng-model="confirmPassword" scmmu-password-match="user.password">
    <span class="fa fa-check fa-2x form-control-feedback"></span>
    <span class="fa fa-times fa-2x form-control-feedback"></span>
    <strong class="text-danger help-block">
      Passwords do not match
    </strong>
  </div>
  <button type="submit" class="btn btn-primary" ng-click="save(user)" ng-disabled="form.$invalid || isUnchanged(user)">
    Save
  </button>
  <button ng-if="!create" class="btn btn-warning" ng-click="remove(user)">
    Remove
  </button>
  <a class="btn btn-default" ng-href="#/users">
    Back
  </a>
</form>