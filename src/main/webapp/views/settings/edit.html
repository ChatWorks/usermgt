<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

<h1>Appliance Settings</h1>

<p>
  Here you can check for appliance updates automatically. To activate this 
  service, you have to click on the checkbox below. After this activation, you 
  will receive the latest information on available updates. Beside your current 
  appliance version and your IP address, we donâ€™t send any other information to 
  our update server.
</p>

<form name="settingsForm" role="form" novalidate>

  <h2>Updates</h2>

  <div class="form-group has-feedback">
    <input type="checkbox" id="update" name="update" ng-model="settings.updateCheckEnabled">
    <label class="control-label" for="update">Check for updates automatically</label>
  </div>
  <p>
    Please be sure to backup your system before every update.
  </p>

  <h3>Login credentials</h3>

  <p>
    For our virtual appliance SCM-Manager Universe we offer an automatic update 
    service. With this service you are always up to date with the latest appliance 
    version without complex installation or configuration. To benefit from our 
    service, you have purchased either the Maintained, Regular or Advanced 
    support package. If you want to learn more about our service or if you are 
    interested in our Service Packages click <a href="">here</a>.
  </p>
  <p>
    Fill in the support ID and password you received after booking one of the 
    mentioned support packages.
  </p>

  <alert ng-if="invalidCredentials" type="danger">Invalid credentials</alert>

  <div class="form-group">
    <label class="control-label" for="userid">Support User/ID:</label>
    <input id="userid" name="userid" type="text" class="form-control" placeholder="Enter userid" ng-model="settings.updateServiceCredentials.username">
  </div>

  <div class="form-group">
    <label for="password">Password</label>
    <input id="password" name="password" type="password" class="form-control" placeholder="Password" ng-model="settings.updateServiceCredentials.password">
  </div>

  <h2>Update Bugzilla-Plugin</h2>

  <div class="form-group has-feedback">
    <input type="checkbox" id="bugzilla" name="bugzilla" ng-model="settings.updateBugzillaPlugin">
    <label class="control-label" for="bugzilla">Update SCM-Manager-Bugzilla-Plugin settings on boot</label>
  </div>
  <p>
    The appliance will automatically reconfigure the settings of the 
    Bugzilla-Plugin in SCM-Manager to the actual IP address. This is useful, 
    if your appliance change its IP address on reboot.
  </p>

  <h2>Update CAS-Server</h2>

  <div class="form-group has-feedback">
    <input type="checkbox" id="cas" name="cas" ng-model="settings.updateCasServer">
    <label class="control-label" for="cas">Update CAS-Server settings for all connected tools on boot</label>
  </div>
  <p>
    The appliance will automatically reconfigure the settings of the CAS-plugins 
    in SCM-Manager, Jenkins, SonarQube and Bugzilla to the actual IP address. 
    This is useful, if your appliance change its IP address on reboot.
  </p>

  <button type="submit" class="btn btn-primary" ng-click="update(settings)" ng-disabled="settingsForm.$invalid || isUnchanged(settings)">
    Save
  </button>
  <br>
  <br>
  <div class ="panel panel-default" style="display: inline-block" >
    <div class = "panel-head h3" style="text-align:center;padding: 10px">
      Release {{version}}
    </div>
    <div class ="panel-body" style="text-align: center">
      <button  class="btn btn-warning" id="updateButton"style="width:250px;" ng-show="updateAvailable && !updateScheduled && !updateInProgress && !updatePrecheck"
               ng-click="openUpdateStartConfirmation()" ng-disabled="buttonDisabled || !validCreds">
        <b class="h2" style="color: black" id = "updateNow">Update now</b><br>
        <i class="glyphicon glyphicon-refresh h1" style="color: black;"></i><br>
        <span class="h4" style="color: black;">  <b>{{availableVersion}}</b>
        </span>  
      </button>
      <div ng-if="updateScheduled" id="update-scheduled" class="h4"><img src="style/img/ajax-loader-clock.gif"><br>Update scheduled</div>
      <div ng-if="updateInProgress" id="update-progress-bar" class="h4" ><img src="style/img/ajax-loader-bar.gif"><br>Update in progress</div>
      <div ng-if="updatePrecheck" id="update-precheck" class="h4"><img alt="" src="style/img/symbol_stethoscope.png"><br>Checking your environment...</div>
      <div ng-if="updateSuccessful" id="update-successful" class="h4"><br>Done</div>
      <div ng-if="updateFailed" id="update-failed" class="h4"><br>Failed</div>
      <div ng-if="updateFailedUnexpected" id="update-failed-unexpected" class="h4"><br>Failed with an unexpected error</div>
      <div ng-if="noUpdate" id="update-failed-unexpected" class="h4"><br>No update needed</div>
      <div ng-if="wrongCreds" id="update-failed-unexpected" class="h4"><br>Username or password is wrong</div>
    </div>
  </div>



  <!-- PreCheck Result Table -->
  <div>
    <button type="submit" class="btn btn-primary" ng-click="openPCResult(test)">
      Open PreCheckResult
    </button>
    <button type="submit" class="btn btn-primary" ng-click="openUserInput()">
      Open UserInputForm
    </button>

  </div>
</form>